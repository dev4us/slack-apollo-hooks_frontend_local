(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1149:function(n,e,t){"use strict";t.r(e);var a=t(0),r=t.n(a),c=t(15),i=t.n(c),o=t(2),u=t(3),l=t(11),s=t(22),d=t(29),f={selectedChannelId:1},h=function(n,e){var t=Object(d.a)({},n);switch(e.type){case"SET_VALUE":return Object(d.a)({},t,Object(s.a)({},e.target,e.payload));case"RESET_DATA":return f;default:return n}},p=Object(a.createContext)(),m=(p.Consumer,t(1155)),g=t(1153),b=t(18),v=t.n(b);function x(){var n=Object(o.a)(["\n  mutation sendMessage(\n    $nickname: String!\n    $contents: String!\n    $innerChannelId: Int!\n  ) {\n    SendMessage(\n      nickname: $nickname\n      contents: $contents\n      innerChannelId: $innerChannelId\n    ) @client\n  }\n"]);return x=function(){return n},n}function C(){var n=Object(o.a)(["\n  query getMessage($innerChannelId: Int!) {\n    messages(innerChannelId: $innerChannelId) @client {\n      nickname\n      contents\n      createdAt\n    }\n  }\n"]);return C=function(){return n},n}function O(){var n=Object(o.a)(["\n  {\n    channelList @client {\n      id\n      channelName\n    }\n  }\n"]);return O=function(){return n},n}function j(){var n=Object(o.a)(["\n  mutation createChannel($channelName: String!) {\n    CreateChannel(channelName: $channelName) @client\n  }\n"]);return j=function(){return n},n}var y=v()(j()),E=v()(O()),k=v()(C()),I=v()(x());function S(){var n=Object(o.a)(["\n  width: 17%;\n  height: 100%;\n  border-top-right-radius: 5px;\n  border-bottom-right-radius: 5px;\n  border: none;\n  font-size: 20px;\n  cursor: pointer;\n  &:hover {\n    background: #a9a7a7;\n  }\n"]);return S=function(){return n},n}function w(){var n=Object(o.a)(["\n  flex: 1;\n  height: 100%;\n  border-top-left-radius: 5px;\n  border-bottom-left-radius: 5px;\n  border: 1px solid #dcdcdc;\n  padding-left: 15px;\n"]);return w=function(){return n},n}function M(){var n=Object(o.a)(["\n  display: flex;\n  position: absolute;\n  width: 85%;\n  height: 35px;\n  bottom: 10px;\n"]);return M=function(){return n},n}function A(){var n=Object(o.a)(["\n      color: white;\n      font-weight: bold;\n      cursor: context-menu;\n    "]);return A=function(){return n},n}function N(){var n=Object(o.a)(["\n  width: 100%;\n  height: 30px;\n  color: #8e8d8d;\n  font-size: 15px;\n  cursor: pointer;\n  ","\n"]);return N=function(){return n},n}function R(){var n=Object(o.a)(["\n  width: 100%;\n  height: 40px;\n  color: #dcdcdc;\n  font-size: 15px;\n"]);return R=function(){return n},n}function _(){var n=Object(o.a)(["\n  width: 100%;\n  height: 40px;\n  font-weight: bold;\n  color: white;\n  font-size: 20px;\n"]);return _=function(){return n},n}function z(){var n=Object(o.a)(["\n  position: relative;\n  padding: 15px 15px 15px 15px;\n  width: 250px;\n  height: 100%;\n  background: #4d394b;\n"]);return z=function(){return n},n}var $=u.default.div(z()),L=u.default.div(_()),G=u.default.div(R()),P=u.default.div(N(),function(n){return n.isActive&&Object(u.css)(A())}),B=u.default.div(M()),q=u.default.input(w()),D=u.default.button(S()),Q=function(){var n=Object(a.useContext)(p),e=n.state,t=n.dispatch,c=Object(m.a)(E).data,i=Object(a.useState)(""),o=Object(l.a)(i,2),u=o[0],s=o[1],d=Object(g.a)(y,{variables:{channelName:u},update:function(n,e){s("")}});return r.a.createElement(r.a.Fragment,null,r.a.createElement($,null,r.a.createElement(L,null,"Slack-Apollo-hooks"),r.a.createElement(G,null,"Channel"),c&&c.channelList&&c.channelList.map(function(n,a){return r.a.createElement(P,{key:a,isActive:n.id===e.selectedChannelId,onClick:function(){return e=n.id,void t({type:"SET_VALUE",target:"selectedChannelId",payload:e});var e}},"# ",n.channelName)}),r.a.createElement(B,null,r.a.createElement(q,{placeholder:"Create Channel",value:u,onChange:function(n){return s(n.target.value)},onKeyPress:function(n){return function(n){"Enter"===n.key&&d()}(n)}}),r.a.createElement(D,{onClick:d},"+"))))},T=t(51),Y=t.n(T),F=t(52),H=t.n(F);function K(){var n=Object(o.a)(["\n  font-size: 14px;\n  margin-top: 2px;\n"]);return K=function(){return n},n}function U(){var n=Object(o.a)(["\n  display: flex;\n  flex-direction: row;\n"]);return U=function(){return n},n}function V(){var n=Object(o.a)(["\n  font-size: 12px;\n  padding-top: 3px;\n  padding-left: 5px;\n"]);return V=function(){return n},n}function J(){var n=Object(o.a)(["\n  font-weight: bold;\n  font-size: 16px;\n"]);return J=function(){return n},n}function W(){var n=Object(o.a)(["\n  display: flex;\n  flex-direction: column;\n"]);return W=function(){return n},n}function X(){var n=Object(o.a)(["\n  margin-right: 10px;\n  height: 40px;\n"]);return X=function(){return n},n}function Z(){var n=Object(o.a)(["\n  display: flex;\n  align-items: center;\n  height: 56px;\n  padding-left: 15px;\n\n  &:hover {\n    background: #ececec;\n  }\n"]);return Z=function(){return n},n}var nn=u.default.div(Z()),en=u.default.img(X()),tn=u.default.div(W()),an=u.default.div(J()),rn=u.default.div(V()),cn=u.default.div(U()),on=u.default.a(K()),un=function(n){var e=n.innerChannelId,t=(n.messageCount,n.setMessageCount),a=Object(m.a)(k,{variables:{innerChannelId:e}}).data;return r.a.createElement("div",null,a.messages&&a.messages.map(function(n,e,a){return t(a.length),r.a.createElement(nn,{key:e},r.a.createElement(en,{src:"//github.com/dev4us/source_warehouse/blob/master/images/avatar.png?raw=true"}),r.a.createElement(tn,null,r.a.createElement(cn,null,r.a.createElement(an,null,n.nickname),r.a.createElement(rn,null,function(n){if(n)return H()(parseInt(n)).utcOffset(360).format("YYYY-MM-DD HH:mm")}(n.createdAt))),r.a.createElement(on,null,n.contents)))}))};function ln(){var n=Object(o.a)(["\n  width: 11%;\n  height: 38px;\n  background: #4d394b;\n  color: white;\n  font-size: 12px;\n  border: none;\n  border-top-right-radius: 5px;\n  border-bottom-right-radius: 5px;\n  cursor: pointer;\n"]);return ln=function(){return n},n}function sn(){var n=Object(o.a)(["\n      width: 76%;\n    "]);return sn=function(){return n},n}function dn(){var n=Object(o.a)(["\n      width: 12%;\n      border-right: none;\n      border-top-left-radius: 5px;\n      border-bottom-left-radius: 5px;\n    "]);return dn=function(){return n},n}function fn(){var n=Object(o.a)(["\n  border: 2px solid black;\n  padding-left: 30px;\n  height: 38px;\n  ","\n  ","\n"]);return fn=function(){return n},n}function hn(){var n=Object(o.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding-left: 15px;\n  padding-right: 15px;\n  height: 60px;\n"]);return hn=function(){return n},n}function pn(){var n=Object(o.a)(["\n  flex: 9;\n  overflow-y: scroll;\n  border-bottom: 1px solid #dcdcdc;\n"]);return pn=function(){return n},n}function mn(){var n=Object(o.a)(["\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n"]);return mn=function(){return n},n}var gn=u.default.div(mn()),bn=u.default.div(pn()),vn=u.default.div(hn()),xn=u.default.input(fn(),function(n){return"nickname"===n.inputId&&Object(u.css)(dn())},function(n){return"chat"===n.inputId&&Object(u.css)(sn())}),Cn=u.default.button(ln()),On=function(){var n=Object(a.useContext)(p).state,e=Object(a.useState)(Y.a.name.findName()),t=Object(l.a)(e,2),c=t[0],i=t[1],o=Object(a.useState)(""),u=Object(l.a)(o,2),s=u[0],d=u[1],f=Object(a.useState)(0),h=Object(l.a)(f,2),m=h[0],b=h[1],v=Object(a.useRef)(),x=Object(a.useRef)(),C=Object(g.a)(I,{variables:{nickname:c,contents:s,innerChannelId:n.selectedChannelId},update:function(n,e){d(""),v.current.focus()}});return Object(a.useEffect)(function(){x.current.scrollIntoView({behavior:"smooth"}),console.log("1")},[m]),r.a.createElement(gn,null,r.a.createElement(bn,null,r.a.createElement(un,{innerChannelId:n.selectedChannelId,messageCount:m,setMessageCount:b}),r.a.createElement("div",{ref:x})),r.a.createElement(vn,null,r.a.createElement(xn,{inputId:"nickname",placeholder:"your nickname",value:c,onChange:function(n){return i(n.target.value)}}),r.a.createElement(xn,{inputId:"chat",ref:v,placeholder:"input your message",value:s,onChange:function(n){return d(n.target.value)},onKeyPress:function(n){return function(n){"Enter"===n.key&&C()}(n)}}),r.a.createElement(Cn,{onClick:C},"Send Message")))},jn=t(53),yn=t.n(jn),En=t(54),kn=t.n(En),In=t(55),Sn=t.n(In);function wn(){var n=Object(o.a)(["\n  display: flex;\n  height: 100%;\n  flex-direction: row;\n"]);return wn=function(){return n},n}var Mn=u.default.div(wn()),An=function(){return r.a.createElement(Mn,null,r.a.createElement(Sn.a,{href:"https://github.com/dev4us/slack-apollo-hooks_frontend",size:80,bgColor:"#9f4940"}),r.a.createElement(yn.a,{url:"//raw.githubusercontent.com/dev4us/source_warehouse/master/images/slack.ico"}),r.a.createElement(kn.a,null,r.a.createElement("title",null,"Slack witch apollo & hooks - dev4us")),r.a.createElement(Q,null),r.a.createElement(On,null))},Nn=t(63),Rn=t(24),_n=t(21),zn=t(1154),$n=t(64),Ln={Mutation:{CreateChannel:function(n,e,t){var a=t.cache,r=a.readQuery({query:E}),c={id:r.channelList.length+1,channelName:e.channelName,__typename:"channels"},i={channelList:r.channelList.concat([c])};return a.writeQuery({query:E,data:i}),null},SendMessage:function(n,e,t){var a=t.cache,r=a.readQuery({query:k,variables:{innerChannelId:e.innerChannelId}}),c={nickname:e.nickname,contents:e.contents,createdAt:Date.now(),innerChannelId:e.innerChannelId,__typename:"message"},i={messages:r.messages.concat([c])};return a.writeQuery({query:k,variables:{innerChannelId:e.innerChannelId},data:i}),null}}},Gn=new zn.a,Pn=new _n.default({cache:Gn,link:Object($n.a)({resolvers:Ln,defaults:{channelList:[{id:1,channelName:"Public",__typename:"channels"}],messages:[]},cache:Gn,typeDefs:"\ntype Channel {\n  id: Int!\n  channelName: String!\n  messages: [Message]\n  createdAt: String!\n  updatedAt: String\n}\n\ntype CreateChannelResponse {\n  ok: Boolean!\n  error: String\n}\n\ntype Mutation {\n  CreateChannel(channelName: String!): CreateChannelResponse!\n  SendMessage(nickname: String!, contents: String!, innerChannelId: Int!): SendMessageResponse!\n}\n\ntype Subscription {\n  CreateChannelSubscription: Channel\n  CreateMessageSubscription: Message\n}\n\ntype GetChannelResponse {\n  ok: Boolean!\n  error: String\n  channels: [Channel]\n}\n\ntype Query {\n  GetChannel: GetChannelResponse!\n  GetMessage(innerChannelId: Int!): GetMessageResponse!\n}\n\ntype GetMessageResponse {\n  ok: Boolean!\n  error: String\n  messages: [Message]\n}\n\ntype Message {\n  id: Int!\n  nickname: String!\n  contents: String!\n  innerChannel: Channel!\n  innerChannelId: Int!\n  createdAt: String!\n  updatedAt: String\n}\n\ntype SendMessageResponse {\n  ok: Boolean!\n  error: String\n}\n"})}),Bn=t(62),qn=t.n(Bn);function Dn(){var n=Object(o.a)(["\n  @import url('https://fonts.googleapis.com/css?family=Maven+Pro');\n  @import url('https://fonts.googleapis.com/css?family=Noto+Sans+KR:300,400,500,700');\n  ",'\n  html, body, #root{\n    width:100%;\n    height:100%;\n  }\n  * {\n    box-sizing: border-box;\n  }\n  *:focus{\n    outline:none;\n  }\n  body{\n    font-family: -apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;\n  }\n  a{\n    color:inherit;\n    text-decoration:none;\n  }\n  input,\n  button{\n    &.focus,\n    &.active{outline:none}\n  }\n  h1,h2,h3,h4,h5,h6{\n    font-family:\'Maven Pro\', sans-serif;\n  }\n']);return Dn=function(){return n},n}var Qn=Object(u.createGlobalStyle)(Dn(),qn.a);i.a.render(r.a.createElement(r.a.Fragment,null,r.a.createElement(function(n){var e=n.children,t=Object(a.useReducer)(h,f),c=Object(l.a)(t,2),i={state:c[0],dispatch:c[1]};return r.a.createElement(p.Provider,{value:i},e)},null,r.a.createElement(Nn.ApolloProvider,{client:Pn},r.a.createElement(Rn.a,{client:Pn},r.a.createElement(An,null),r.a.createElement(Qn,null))))),document.getElementById("root"))},67:function(n,e,t){n.exports=t(1149)}},[[67,1,2]]]);
//# sourceMappingURL=main.9302a552.chunk.js.map